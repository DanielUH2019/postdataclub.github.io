<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../icon.png">

    <title>Postdata.club - ¿Se puede predecir el Consejo de Estado?</title>
    <link rel="stylesheet" type="text/css" href="../../assets/css/c3.css">
    <link href='../../assets/fonts/font-awesome-4.2.0/css/font-awesome.min.css' rel="stylesheet" type="text/css">
    <!-- Bootstrap core CSS -->
    <link href="../../assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../../assets/css/custom.css" rel="stylesheet">
    
    <script src="../../assets/js/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/jquery.min.js"><\/script>')</script>
    <script src="../../assets/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-84667443-1', 'auto');
  ga('send', 'pageview');
</script>

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="../../assets/css/chatbot.min.css" />
    <link rel="stylesheet" type="text/css" href="css/chatbot.css">
    
  </head>

  <body>

   <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">
          <img id="myLogo" class = "logo logo-responsive" src="../../assets/images/logo.png" >


          </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="../../index.html">Inicio</a></li>
            <li><a href="../../equipo/quienes-somos.html">¿Quiénes somos?</a></li>
             <li class="dropdown">
             <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Autores <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="../../equipo/ernesto.html">Ernesto Guerra</a></li>
                <li><a href="../../equipo/jessica.html">Jessica Domínguez</a></li>
                <li><a href="../../equipo/saimi.html">Saimi Reyes</a></li>
                <li><a href="../../equipo/yudivian.html">Yudivián Almeida</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Géneros <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="../../generos/principales.html">Principales</a></li>
                <li ><a href="../../generos/articulos.html">Artículos</a></li>
                <li><a href="../../generos/reportajes.html">Reportajes</a></li>
                <li><a href="../../generos/comentarios.html">Comentarios</a></li>
                <li><a href="../../generos/investigaciones.html">Investigaciones</a></li>
                <li><a href="../../generos/visualizaciones.html">Visualizaciones</a></li>
                <li><a href="../../generos/perfiles.html">Perfiles</a></li>
              </ul>
            </li>
             
          </ul>
        </div>
      </div>
    </nav>
    <div class="menu-movil-separator"></div>
    
    <div class="main-title">
        <div class="first-title">
        ¿Se puede predecir el Consejo de Estado?
        </div>
        <div class="second-title">
        Amanda lo intenta
        </div>
    </div>
    <div id="block1" style="margin-top:-15px;" >
    <img src="images/capitolio-bot-pc.jpg" class="cover hidden-sm hidden-xs">
    <img src="images/capitolio-bot-movil.jpg" class="cover hidden-lg hidden-md">
    </div>
    
    <div class="me-art">
    <p>
    Amanda es un <a href="https://es.wikipedia.org/wiki/Bot_conversacional">chatbot</a> cuya pretensión no es comunicarse sobre todos los temas, sino informar sobre el Consejo de Estado de Cuba 
    y la ya muy cercana elección de este. Amanda intenta, a partir de los datos que tiene registrados, predecir aspectos del próximo Consejo de 
    Estado. Obviamente, esto es una mera adivinación, pero estará basada en los patrones que han seguido los CE anteriores y en las probabilidades que un modelo
    de aprendizaje de máquina le otorga a cada diputado para figurar entre los 31 elegidos. Nuestro chatbot intentará, de varias maneras, 
    hacer una predicción eficiente. 
    </p>
    <p>
    Como Raúl ha anunciado que no aceptaría desde esta legislatura el puesto de Presidente de los Consejos de Estado y de Ministros, 
    hemos decidido, a priori, que este no figurará en nuestras predicciones, aunque Amanda no descarta que tiene amplias posibilidades 
    de aparecer en el Consejo de Estado.
    Otros miembros anteriores con amplias posibilidades también serán descartados por su edad, como es el caso de algunos de los miembros de 
    la llamada Generación Histórica. 
    </p>
    <p>
    Los resultados reales, por supuesto, no los sabemos, ni los sabe Amanda, pero a partir del 18 de abril podremos saber en qué medida el voto de los 
    diputados coincide con esta profecía.
    </p>
    </div>
    <div id="amanda" class="media-block " >
        <div id="demo">
        
        
        <div class="row">
        <div class="col-lg-1 col-md-1">
        <img src="images/pd-amanda-small.png" style="width:80px">
        </div>
        <div class="col-lg-11 col-md-11 chat-inputs">
        <input id="humanInput" type="text" placeholder="Escribe 'Hola' para comenzar a conversar" />
        <div class="button main-color " onclick="if (!ChatBot.playConversation(sampleConversation,2000)) {alert('conversation already running');};">Un ejemplo de conversación!</div>
        <div class="button main-color " onclick="$('#chatBotCommandDescription').slideToggle();" style="margin-right:3px">¿Qué puedo preguntar?</div>
    
        <div style="clear: both;">&nbsp;</div>
        </div>
        </div>

        
        <div id="chatBotCommandDescription"></div>
        
        <div id="chatBot">
            <div id="chatBotThinkingIndicator"></div>
            <div id="chatBotHistory"></div>
        </div>
</div>
        
    </div>
    
 
    <div class="other-news" style="margin-top:-40px;">
    <div class="media-block" >
             <div id="open-metodology" class="main-color cursor reading-more" onclick="show_profile('metodology',true)" style="color:#FFFFFF;text-align:left;padding:10px;font-size:22px;">
             <span >¿Cómo se creó Amanda? <i class="fa fa-plus-square-o"></i></span>
             </div>
             <div id="close-metodology" class="main-color cursor reading-less" onclick="show_profile('metodology',false)" style="display:none;color:#FFFFFF;text-align:left;padding:10px;font-size:22px;">
             <span >Cerrar la metodología <i class="fa fa-minus-square-o"></i></span>
             </div>
    <div id="metodology" style="display:none">
    <div id="fuga"  style="padding-top:20px;padding-bottom:20px;padding-left:5%;padding-right:5%;">
    <p>
    Para crear a Amanda era necesario definir e instrumentar la interacción del chatbot y para ello era importante obtener, bajo un modelo, las probabilidades
    de pertenecer al Consejo de Estado (CE) de cada diputado. 
    </p>
    <p>
    En la creación del chatbot se utilizó la biblioteca de javascript <a href='http://rawgit.com/ddsky/chatbot'>Chatbot</a>. Para Amanda, como chatbot, 
    sus interacciones fueron definidas con expresiones regulares. Así, para cada patrón se redactaron un conjunto de posibles respuestas de las cuales
    se escogía la respuesta que daría Amanda. Algunas de estas respuestas requerían de información específica para cada diputado, estas se obtuvieron
    de una base de datos creada para artículos previos que tocaban el tema de las elecciones. En el caso de las probabilidades en las que se basa la prediccón,
    se tomaron de un modelo que se creó explícitamente para el uso de Amanda.
    </p>
    <p>
    La búsqueda de los datos de los diputados según su nombre se realizó utilizando la biblioteca de javascript <a href="http://fusejs.io">Fuse</a>, que
    permite hacer búsquedas difusas en un arreglo a partir de cadenas de texto.
    </p>
    <p>
    La parte esencial de Amanda es su modelo de predicción. La idea primaria fue construir un clasificador supervisado que, basado en los Consejos de Estado 
    previos, pudiera predecir la probabilidad que tenía cada diputado de pertenecer al Consejo de Estado. Para ello era necesario conocer todos los CE previos,
    información que se disponía a partir del artículo <a href="consejo-de-estado.html">Consejo de Estado de Cuba</a>. Así, por cada persona que históricamente 
    había pertenecido al CE se podían disponer de varios datos que podrían ser utilizados en la construcción de un clasificador. 
    </p>
    <p>
    En total, dispusimos
    de 22 características diferentes: el identificador de la persona, si perteneció al CE anterior y a cuántos consejos había pertenecido, el sexo de la persona,
    si pertenecía al Buró Político, al Comité Central o al Secretariado del PCC, si era el máximo dirigente de la UJC, CDR, CTC, ANAP o FMC, si era secretario
    provincial del PCC y de qué provincia lo era, si era miembro del Consejo de Ministros (CM), si era ministro, si era directivo del CM y qué ministerio tenía a
    su cargo, si había estado en la dirección del CE anterior, qué cargo tenía y cuántas veces había integrado direcciones del CE, y, finalmente, si formó parte
    de la dirección de la Asamblea Nacional anterior. 
    </p>
    <p>
    Con estas características, y para poder construir el clasificador, fue necesario anotar, por cada Consejo elegido, un conjunto de diputados que no fue electo
    al CE. Para esto fue necesario identificar varios diputados de cada legislatura y luego buscar las informaciones para completar, por cada uno, las
    22 características que se tenían de cada miembro del CE. Esta fue una tarea ardua y propensa a errores, así que se intentó otra alternativa.
    </p>
    <p>
    Como en el artículo <a href="consejo-de-estado.html">Consejo de Estado de Cuba</a> se pudo comprobar que había varios elementos que parecían
    ser muy relevantes en la conformación de los CE, se tomaron estos elementos como base para definir dos conjuntos diferentes a partir de todas
    las personas que han integrado los Consejos. Uno de estos conjuntos tendría a los diputados que más se parecen a los parlamentarios que no resultan
    electos al CE y un segundo con los diputados que tienen características que los hicieron miembros más probables. Estos conjuntos 
    se utilizaron para entrenar el clasificador supervisado, el primero como clase negativa y el segundo como clase positiva.
    </p>
    <p>
    En el conjunto de miembros más probables de pertenecer al CE se caracterizó por aquellos diputados que han pertenecido 3 veces o más al Consejo de Estado,
    los máximos dirigentes de la UJC, CDR, CTC, ANAP y FMC, los ministros de las FAR y el MINREX, todos los que han pertenecido a las direcciones de los
    CE así como los Secretarios Provinciales del PCC en La Habana.
    </p>
    <p>
    Para trabajar con los distintos algoritmos de aprendizaje de máquina se utilizó la biblioteca de clases <span class="it">Sklearn</span> y el lenguaje de programación <span class="it">Python</span>. 
    Como las características que se tienen de cada miembro del CE son mixtas, donde lo más común es que existan características binarias se utilizó una
    representación binaria de los vectores de características. En cada vector, los datos binarios fueron representados como tales. Para los elementos que
    representaban un identificador, se contabilizaron todos los posibles indicadores y se creó una lista binaria donde el índice que coincide con el identificador
    se representó con uno y el resto con cero. En los casos que la característica representaba un cantidad, se creó una lista binaria cuyo tamaño
    corresponde con la cantidad máxima posible y toman valor uno todos los índices de la lista desde el inicio hasta la cantidad que está definida en el vector
    de características mientras que el resto, hasta el final, toma valor cero. 
    </p>
    <p>
    Los datos que se utilizaron para entrenar resultaron muy esparcidos y, además, no se disponía de un buen conjunto para establecer la calidad del clasificador.
    Por ello se decidió utilizar un ensemble de clasificadores, en este caso uno basado en Votos (VotingClassifier). Los clasificadores que integraron el ensemble fueron:
    un KNN que utilizó una métrica de distancia binaria (jaccard), uno basado en Naive Bayes (GaussianNB) , un Árbol de Decisión, otro ensemble (RandomForest),
    una variante de SVM (NuSVC) y una Regresión Logística. Estos dos últimos fueron definidos a partir de una red neuronal tipo BernoulliRBM que logra una
    mejor discriminación de las entradas binarias. El VotingClassifier fue caracterizado como de votación suave (voting='soft') pues de esta manera
    se puede obtener la probabilidad de clasificación para cada clase de cada elemento que se clasifique.
    </p>
    <p>
    Con este clasificador, se tiene en cuenta para la clasificación la 'opinión' de seis clasificadores diferentes. Este 
    fue entrenado con la totalidad del conjunto de entrenamiento: los miembros de todos los CE cuya clase estará dada por la pertenencia o no al conjunto con más
    posibilidades de pertenecer al CE dada la historia. Luego de entrenado, ante la inexistencia de un conjunto de prueba, se clasificó nuevamente el total del conjunto y se obtuvo un
    porciento de clasificación de 66.54%. Igualmente, se clasificaron todos los CE desde la I hasta la VIII legislatura y los porcientos de clasificación
    fueron 66.66%, 61.76%, 68.57%, 70.58%, 76.47%, 76.47%, 59.23% y 55.26% respectivamente. En todos los casos el resultado fue superior al 55% que es un
    valor de veracidad interesante si se tiene en cuenta que la probabilidad de, al azar, adivinar un Consejo de Estado es casi cero.
    </p>
    <p>
    Siguiendo esta misma metodología, se creó un clasificador ensemble basado en votos (VotingClassifier), integrado por clasificadores del mismo tipo que
    el anterior, para poder determinar la probabilidad de que un miembro del Consejo de Estado fuese parte de la dirección de este. Aquí la obtención y definición
    del conjunto de entrenamiento era más clara. Todos los miembros de un CE que hubieran formado parte de la dirección del mismo integrarían la clase
    positiva y el resto la negativa. En este caso, como en el anterior clasificador, si una persona pertenecía a varios CE tendría en el conjunto de
    entrenamiento tantas instancias como pertenencias a los Consejos hubiese tenido. En cada instancia estarían reflejadas las características relativas
    a la persona acorde la momento de la elección al CE en cuestión.
    </p>
    <p>Definidos los dos clasificadores, el que asigna las probabilidades de pertenecer al Consejo de Estado y el que determina las de pertenecer a la dirección del mismo,
    se pudo clasificar a todos los diputados. Para ello, en base a los datos obtenidos para el artículo <a href="explora-la-candidatura.html">Explora la candidatura al parlamento</a>,
    se obtuvieron los vectores de características de todos los diputados. Por supuesto, las mismas 22 características que se definieron para los conjuntos de 
    entrenamiento. Igualmente, siguiendo la misma metodología, estos vectores fueron binarizados.
    </p>
    <p>
    Finalmente, los vectores binarizados relativos a los diputados fueron clasificados y con los valores obtenidos, junto a la información que de los diputados
    se tendía, se construyó un <a href="data/diputados.json">documento</a> en formato <span class='it'>JSON</span> que es el que se utiliza como base de conocimientos para Amanda.
    </p>
    </div>
    
    <div id="winner-more">
             <div class="main-color cursor reading-less" onclick="show_profile('metodology',false)" style="color:#FFFFFF;text-align:left;padding:10px;font-size:22px;">
             <span >Cerrar la metodología <i class="fa fa-minus-square-o"></i></span>
             </div>
    </div>
    </div>
    </div> 

<div id="block5"  style="margin-top:-30px;">

<div style="padding-top:0px;padding-bottom:0px;padding-left:5%;padding-right:5%;">
    <div class="row">
    <div class="col-lg-5 col-md-5">
        <p><span class="bd">Autores:</span> <br>
        <span class="auts"><a href="../../equipo/yudivian.html">Yudivián Almeida</a>, <a href="../../equipo/saimi.html">Saimi Reyes</a> y <a href="../../equipo/ernesto.html">Ernesto Guerra</a></span></p>
        <p><span class="bd">Foto:</span><br>
        <span class="auts">Tomada de <a href=http://www.arquitecturacuba.com/">Arquitectura Cuba</a></span></p>
    </div>
    <div class="col-lg-6 col-md-6">
        <p><span class="bd">Fecha de publicación:</span><br>
        <span class="auts">16/4/2018</span></p>
        <p><span class="bd">Fuentes e datos:</span><br>
        <span class="auts"><a href="data/candidatos.json">Candidatos a diputados</a>
         y <a href="data/consejo-estado.json">Consejos de Estado </a>
        
    </div>
    </div>
</div>
</div> 
    

<div class="image-block ">
   <div id="link-bar" class="row ">
        <div class="cursor col-lg-4 col-md-4  facebook-color"><a class="link-out" style="text-decoration:none;"  href="http://www.facebook.com/sharer.php?u=http://www.postdata.club/issues/201803/predice-el-consejo-de-estado.html"  target='_blank'><div> <i class="fa fa-facebook" ></i> Facebook</div></a></div>
                <div class="cursor col-lg-4 col-md-4  twitter-color"><a class="link-out" style="text-decoration:none;" href="https://twitter.com/share?url=http://www.postdata.club/issues/201803/predice-el-consejo-de-estado.html&amp;text=%C2%BFSe%20puede%20predecir%20el%20Consejo%20de%20Estado%3F%20Este%20chatbot%20lo%20intenta&amp;hashtags=#postdataclub" target='_blank'><div > <i class="fa fa-twitter"></i> Twitter</div></a></div>
                <div class="cursor col-lg-4 col-md-4  main-color"><a class="link-out" style="text-decoration:none;" href="mailto:?subject=Lee este artículo de Postdata.club&amp;body=¿Se puede predecir el Consejo de Estado? Este chatbot lo intentar http://www.postdata.club/issues/201803/predice-el-consejo-de-estado.html"  target='_blank'><div > <i class="fa fa-envelope"></i> Email</div></a></div>
    </div>
</div>
    

    
         <div class="comments-block">
        <div id="disqus_thread"></div>
        <script>
        
        /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
        
        var disqus_config = function () {
            this.page.url = 'http://postdata.club/issues/201803/predice-el-consejo-de-estado.html';  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = 'PDClub-201803-4'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };
        
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '//postdataclub.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>   
    
    </div>
    
    <div class="read-more main-text">
    Amanda también te recomienda:
    </div>
 <div class="other-news row">
    
         <div class="col-lg-4 col-md-4 container" >
         <div class="news-block main-color  ">
            <div class="title-author-block">
            <div class="front-news-title"><a href="consejo-de-estado.html">Consejos de Estado de Cuba</a></div>
            <div class="front-news-author">Por <a href="../../equipo/yudivian.html">Yudivián Almeida</a>, <a href="../../equipo/saimi.html">Saimi Reyes</a> y <a href="../../equipo/ernesto.html">Ernesto Guerra</a></div>
            </div>
            </div>
        </div>
    
         <div class="col-lg-4 col-md-4 container" >
         <div class="news-block viz-color  ">
            <div class="title-author-block">
            <div class="front-news-title"><a href="explora-la-candidatura.html">Explora la candidatura al parlamento</a></div>
            <div class="front-news-author">Por <a href="../../equipo/yudivian.html">Yudivián Almeida</a> y <a href="../../equipo/saimi.html">Saimi Reyes</a></div>
            </div>
            </div>
        </div>
        
        <div class="col-lg-4 col-md-4  container " >
           <div class="news-block main-color"> 
           <div class="title-author-block">
            <div class="front-news-title"><a href="se-parecera-el-parlamento-a-cuba.html">¿Se parecerá el parlamento a Cuba?</a></div>
            <div class="front-news-author">Por <a href="../../equipo/yudivian.html">Yudivian Almeida</a></div>
           </div>            
          </div>
        </div>
  
    </div>
    
     <div class="footer">
        <div>
        <span><a href="../../index.html"><img class="logo-footer" src="../../assets/images/logo-white.png"></a></span>
        <span class="footer-icons">
        <a href="mailto://social@postdata.club"><i class="fa fa-envelope"></i></a> 
        <a href="http://facebook.com/postdataclub"><i class="fa fa-facebook"></i></a> 
        <a href="http://twitter.com/postdataclub"><i class="fa fa-twitter"></i></a> 
        <a href="https://www.youtube.com/channel/UCZ14lFS4j0Aczm8OniDa9DQ"><i class="fa fa-youtube"></i></a>
        </span>
        </div>

        <div class="copyright">Copyright 2016</div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../assets/js/d3.min.js" charset="utf-8"></script>
    <script src="../../assets/js/c3.js"></script>
    <script src="../../assets/js/fuse.min.js"></script>
    <script src="../../assets/js/chatbot.min.js"></script>
    
    <script>
    function show_profile(idp,open) {
        opening = '#open-'+idp;
        closing = '#close-'+idp;
        if (open) {
            $(opening).hide();
            $(closing).show();
            $('#'+idp).show();
        } else {
            $('#'+idp).hide();
            $(opening).show();
            $(closing).hide();
        }
    }
    </script>
    <script src="js/chat.js"></script>
  </body>
</html>
